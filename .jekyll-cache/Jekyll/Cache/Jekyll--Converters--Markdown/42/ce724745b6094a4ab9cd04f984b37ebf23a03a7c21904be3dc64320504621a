I"<h2 id="spring-controller">Spring Controller</h2>

<p>In any Spring web application, a Controller is a Java object who’s job is to handle requests to certain URIs. We will use annotations to methods in this class to indicate which URI each method should handle.</p>

<ol>
  <li>Let’s first create a controller package within com.teamtreehouse.giflib</li>
  <li>Within the controller package, create the Java class for the controller and give is a name, say GifController.</li>
  <li>To indicate that this class is a Spring Controller, we are using the <code class="highlighter-rouge">@Controller</code> annotation on the class itself.</li>
  <li>In a Spring controller, we can add as many methods as we like. We’ve added a method to handle request to our applications home page.</li>
  <li>To execute the method when anyone visits the home page, we’ve added the <code class="highlighter-rouge">@RequestMapping()</code> annotation, which maps a URI to a controller method.</li>
  <li>The  <code class="highlighter-rouge">@ResponseBody</code> annotation indicates that the String we are returning from the method should be used as the response without any further processing.</li>
  <li>In order for Spring to automatically scan packages for controllers, we need to add the <code class="highlighter-rouge">@ComponentScan</code> annotation to our AppConfig class.</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">teamtreehouse</span><span class="o">.</span><span class="na">giflib</span><span class="o">.</span><span class="na">controller</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.ResponseBody</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GifController</span> <span class="o">{</span>

    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"/"</span><span class="o">)</span>
    <span class="nd">@ResponseBody</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">listGifs</span><span class="o">(){</span>
        <span class="k">return</span> <span class="s">"List of all the GIF's"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><br /></p>

<h2 id="thymeleaf">Thymeleaf</h2>

<p>Thymeleaf is a templating engine that allows us to write HTML while allowing placeholders for data that will come from Java objects. These placeholders will leverage the <strong>Spring Expression Language</strong> to access the fields of the Java objects from it’s getters and setters.</p>

<ol>
  <li>Add the dependency in build.grade: <code class="highlighter-rouge">org.springframework.boot:spring-boot-starter-thymeleaf:2.2.2.RELEASE</code></li>
  <li>Create your templates (with .html extension) under <code class="highlighter-rouge">src/main/resources/templates</code></li>
  <li>Thymeleaf expects HTML to be XML compliant, which means all opening tags must have a closing tag or must be self closing.</li>
  <li>In our controller method remove the @ResponseBody annotation, as we do need further processing by Thymeleaf before the response is sent to the client.</li>
  <li>In the controller, return the HTML file name without the filename extension.</li>
</ol>

<p>That’s all we need to serve HTML templates!. Below is the high level workflow of how our application is working:</p>

<ul>
  <li>The server’s dispatcher servlet receives the request from the client.</li>
  <li>The dispatcher servlet examines the URI, and determines which controller and which of it’s methods is mapped to the URI by using the @RequestMapping annotation.</li>
  <li>The mapped controller method is executed and puts together a response to the original HTTP request.</li>
  <li>This response is now fed to the view resolver. Since our application is configured to use Thymeleaf, all the data is passed on to the Thymeleaf template and final response is handed over the dispatcher servlet.</li>
  <li>The dispatcher servlet hands it back to the web server. The web server creates an HTTP response with a status code of 200 and includes the HTML from our application in the response body.</li>
  <li>The entire response is then sent in response to the original HTTP request.</li>
</ul>

<h2 id="adding-static-assets">Adding Static Assets</h2>

<ol>
  <li>Create a home for static assets (css, images, javascript, fonts, videos etc). A standard location is <code class="highlighter-rouge">/src/main/resources/static</code> which is where Thymeleaf will expect to find them while processing our templates.</li>
  <li>Let’s say we want to add a CSS file, style.css - in order to add this in our HTML template, we need to create a self closing <code class="highlighter-rouge">&lt;link&gt;</code> tag. In the href attribute, instead of adding an absolute path to the CSS file, we can have Thymeleaf discover it by using a link URL expression. To do this, we will prefix the href attribute with <code class="highlighter-rouge">th</code>. In XML, this th is called a namespace - and may show as an error (name is not bound) by the IDE. To fix this, we have defined the namespace in the html tag as shown below. In the href attribute, the @ sign indicates that a URL should be generated here.</li>
</ol>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span> <span class="na">xmlns:th=</span><span class="s">"http://www.thymeleaf.org"</span><span class="nt">&gt;</span>
...

<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">th:href=</span><span class="s">"@{/style.css}"</span>   <span class="nt">/&gt;</span>
</code></pre></div></div>
<p><br /></p>

:ET